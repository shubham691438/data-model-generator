[
    {
      "type": "WriteApiIntegration",
      "method": "GET",
      "apiPath": "dummy",
      "headers": {},
      "authTypes": [
        "BASIC"
      ],
      "contentType": "APPLICATION_JSON",
      "queryParams": {},
      "failSilently": false,
      "integrationId": "ashby-candidate-application-post-start-chain",
      "dataModelRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "true"
        }
      ],
      "requestPayload": {
        "requestBody": "",
        "requestBodyConverter": []
      },
      "responseConfig": {
        "responseType": "SINGLE_ENTITY",
        "jsonataExpression": "$",
        "resPassingJsonataExpression": null
      },
      "dataModelTarget": null,
      "responseHandlers": [
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 0,
          "jsonataConvertorExpression": "{\"errorMessage\": \"Integration not executed because this is dummy integration to support dependency fields for next integration.\"}"
        }
      ],
      "headersInResponse": false,
      "integrationDependency": null,
      "executionEligibilityRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "false"
        }
      ]
    },
    {
      "type": "WriteApiIntegration",
      "method": "POST",
      "apiPath": "/candidate.search",
      "headers": {},
      "authTypes": [
        "BASIC"
      ],
      "contentType": "APPLICATION_JSON",
      "queryParams": {},
      "failSilently": false,
      "integrationId": "ashby-check-candidate-already-exists",
      "dataModelRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "true"
        }
      ],
      "requestPayload": {
        "requestBody": "{\n  \"email\": \"${email}\" \n}",
        "requestBodyConverter": []
      },
      "responseConfig": {
        "responseType": "SINGLE_ENTITY",
        "jsonataExpression": "$",
        "resPassingJsonataExpression": null
      },
      "dataModelTarget": null,
      "responseHandlers": [
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$count(results) > 0 and $exists(results[0].id) and $exists($.success) and $.success=true"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"candidateId\": results[0].id, \"integrationId\": \"ashby-check-candidate-already-exists\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$count(results) = 0 and $exists($.success) and $.success=true"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"errorMessage\": $.errors, \"integrationId\": \"ashby-check-candidate-already-exists\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$exists($.success) and $.success=false"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"errorMessage\": $.errors}"
        },
        
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 401,
          "jsonataConvertorExpression": "{\"errorMessage\": errorMessage}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 404,
          "jsonataConvertorExpression": "{\"errorMessage\": \"candidate not found for emailId\" }"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 0,
          "jsonataConvertorExpression": "{\"errorMessage\": \"Integration not executed because data might be missing-ashby-check-candidate-already-exists.\"}"
        }
      ],
      "headersInResponse": false,
      "integrationDependency": {
        "queryType": "SINGLE_ENTITY",
        "jsonDataType": "TEXT_PRIMITIVE",
        "dependencyFields": [
          {
            "type": "RestApiIntegrationField",
            "targetField": "email",
            "jsonataExpression": "inputData.candidate.email",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          }
        ],
        "dependentIntegrationId": "ashby-candidate-application-post-start-chain"
      },
      "executionEligibilityRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$exists(inputData.candidate.email) and inputData.candidate.email != null"
        }
      ]
    },
    {
      "type": "WriteApiIntegration",
      "method": "POST",
      "apiPath": "/candidate.create",
      "headers": {},
      "authTypes": [
        "BASIC"
      ],
      "contentType": "APPLICATION_JSON",
      "queryParams": {},
      "failSilently": false,
      "integrationId": "ashby-create-candidate",
      "dataModelRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$exists(inputData.candidate.email) and inputData.candidate.email != null and $exists(inputData.application.atsJobId) and inputData.application.atsJobId != null and $exists(inputData.candidate.fullName) and inputData.candidate.fullName != null"
        }
      ],
      "requestPayload": {
        "requestBody": "$merge([{\n  \"name\": \"${name}\",\n  \"email\": \"${email}\",\n  \"phoneNumber\": \"${phoneNumber}\",  \n   \"sourceId\": \"${sourceId}\",\n   \"location\": {\n    \"city\": \"${city}\",\n    \"region\":\"${state}\",\n    \"country\": \"${country}\"\n  }\n},\n(\n       $exists(inputData.application.customFields.questionAnswers.linkedInUrl) and inputData.application.customFields.questionAnswers.linkedInUrl !=null\n       ? {\"linkedInUrl\" : inputData.application.customFields.questionAnswers.linkedInUrl} : {}\n),\n(\n       $exists(inputData.application.customFields.questionAnswers.githubUrl) and inputData.application.customFields.questionAnswers.githubUrl !=null\n       ? {\"githubUrl\" : inputData.application.customFields.questionAnswers.githubUrl} : {}\n),\n(\n       $exists(inputData.application.customFields.questionAnswers.website) and inputData.application.customFields.questionAnswers.website !=null\n       ? {\"website\" : inputData.application.customFields.questionAnswers.website} : {}\n)\n\n])",
        "requestBodyConverter": []
      },
      "responseConfig": {
        "responseType": "SINGLE_ENTITY",
        "jsonataExpression": "$",
        "resPassingJsonataExpression": null
      },
      "dataModelTarget": null,
      "responseHandlers": [
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$exists(results.id) and results.id != null and  $exists($.success) and $.success=true"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"candidateId\": results.id, \"integrationId\": \"ashby-create-candidate\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$exists($.success) and $.success=false"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"errorMessage\": $.errors}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 400,
          "jsonataConvertorExpression": "{\"errorMessage\": \"getting 400 error\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 401,
          "jsonataConvertorExpression": "{\"errorMessage\": errorMessage,  \"integrationId\": \"ashby-create-candidate\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 0,
          "jsonataConvertorExpression": "{\"errorMessage\": \"Integration not executed because data might be missing-ashby-create-candidate.\"}"
        }
      ],
      "headersInResponse": false,
      "integrationDependency": {
        "queryType": "SINGLE_ENTITY",
        "jsonDataType": "TEXT_PRIMITIVE",
        "dependencyFields": [
          {
            "type": "RestApiIntegrationField",
            "targetField": "name",
            "jsonataExpression": "inputData.candidate.fullName",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "email",
            "jsonataExpression": "inputData.candidate.email",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "phoneNumber",
            "jsonataExpression": "inputData.candidate.phoneNumbers.phoneNumber",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "city",
            "jsonataExpression": "inputData.candidate.address.city",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "state",
            "jsonataExpression": "$exists(inputData.candidate.customFields.questionAnswers.province) and inputData.candidate.customFields.questionAnswers.province !=null ?\n    inputData.candidate.customFields.questionAnswers.province : inputData.candidate.address.state",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "country",
            "jsonataExpression": "inputData.candidate.address.country",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          }
        ],
        "dependentIntegrationId": "ashby-check-candidate-already-exists"
      },
      "executionEligibilityRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$exists(inputData.candidate.email) and inputData.candidate.email != null and $exists(inputData.application.atsJobId) and inputData.application.atsJobId != null and $exists(inputData.candidate.fullName) and inputData.candidate.fullName != null"
        },
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$not($exists(response.candidateId))"
        }
      ]
    },
    {
      "type": "WriteApiIntegration",
      "method": "POST",
      "apiPath": "/candidate.uploadResume",
      "headers": {},
      "authTypes": [
        "BASIC"
      ],
      "contentType": "MULTIPART_FORM_DATA",
      "queryParams": {},
      "failSilently": false,
      "integrationId": "ashby-upload-resume-one",
      "dataModelRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "true"
        }
      ],
      "requestPayload": {
        "requestBody": "{\n    \"candidateId\" : \"${candidateId}\" ,\n    \"resume\": \"${attachmentContent}\"\n}",
        "requestBodyConverter": [
          {
            "field": "resume",
            "fileConvertType": "Base64ToFile"
          }
        ]
      },
      "responseConfig": {
        "responseType": "SINGLE_ENTITY",
        "jsonataExpression": "$",
        "resPassingJsonataExpression": null
      },
      "dataModelTarget": null,
      "responseHandlers": [
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$exists(results.id) and results.id != null and  $exists($.success) and $.success=true"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"candidateId\": results.id, \"integrationId\": \"ashby-upload-resume-one\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$exists($.success) and $.success=false"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"errorMessage\": $.errors}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 404,
          "jsonataConvertorExpression": "{\"errorMessage\": \"Resume upload failed: Candidate or endpoint not found.\", \"integrationId\":\"ashby-upload-resume-one\",\"response\": $}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 500,
          "jsonataConvertorExpression": "{\"errorMessage\": \"ashby server error: \" & (error_message ? error_message : $string($)), \"integrationId\":\"ashby-upload-resume-one\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 400,
          "jsonataConvertorExpression": "{\"errorMessage\": \"getting 400 error\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 0,
          "jsonataConvertorExpression": "{\"errorMessage\": \"Integration not executed because data might be missing-ashby-upload-resume-one.\"}"
        }
      ],
      "headersInResponse": false,
      "integrationDependency": {
        "queryType": "SINGLE_ENTITY",
        "jsonDataType": "TEXT_PRIMITIVE",
        "dependencyFields": [
          {
            "type": "RestApiIntegrationField",
            "targetField": "candidateId",
            "jsonataExpression": "response.candidateId",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "attachmentContent",
            "jsonataExpression": "inputData.application.attachment.attachmentContent",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          }
        ],
        "dependentIntegrationId": "ashby-create-candidate"
      },
      "executionEligibilityRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$exists(inputData.application.attachment) and inputData.application.attachment != null and $exists(inputData.application.attachment.attachmentContent) and inputData.application.attachment.attachmentContent != null"
        },
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$exists(response.candidateId)"
        }
      ]
    },
    {
      "type": "WriteApiIntegration",
      "method": "POST",
      "apiPath": "/application.create",
      "headers": {},
      "authTypes": [
        "BASIC"
      ],
      "contentType": "APPLICATION_JSON",
      "queryParams": {},
      "failSilently": false,
      "integrationId": "ashby-create-application-one",
      "dataModelRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "true"
        }
      ],
      "requestPayload": {
        "requestBody": "{\n  \"candidateId\": \"${candidateId}\",\n  \"jobId\": \"${jobId}\",\n  \"sourceId\": \"${sourceId}\"\n}",
        "requestBodyConverter": []
      },
      "responseConfig": {
        "responseType": "SINGLE_ENTITY",
        "jsonataExpression": "$",
        "resPassingJsonataExpression": null
      },
      "dataModelTarget": null,
      "responseHandlers": [
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$exists(results.id) and results.id != null and  $exists($.success) and $.success=true"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"applicationId\": results.id, \"candidateId\": \"${candidateId}\", \"jobId\": \"${jobId}\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$exists($.success) and $.success=false"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"errorMessage\": $.errors}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 400,
          "jsonataConvertorExpression": "{\"errorMessage\":errorMessage}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 0,
          "jsonataConvertorExpression": "{\"errorMessage\": \"Integration not executed because data might be missing-ashby-create-application-one.\"}"
        }
      ],
      "headersInResponse": false,
      "integrationDependency": {
        "queryType": "SINGLE_ENTITY",
        "jsonDataType": "TEXT_PRIMITIVE",
        "dependencyFields": [
          {
            "type": "RestApiIntegrationField",
            "targetField": "candidateId",
            "jsonataExpression": "response.candidateId",
            "restApiIntegrationContext": "API_RESPONSE_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "jobId",
            "jsonataExpression": "inputData.application.atsJobId",
            "restApiIntegrationContext": "API_RESPONSE_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "jobId",
            "jsonataExpression": "inputData.application.atsJobId",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "candidateId",
            "jsonataExpression": "response.candidateId",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          }
        ],
        "dependentIntegrationId": "ashby-upload-resume-one"
      },
      "executionEligibilityRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$exists(inputData.application.atsJobId) and inputData.application.atsJobId != null"
        },
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$exists(response.candidateId)"
        }
      ]
    },
    {
      "type": "WriteApiIntegration",
      "method": "POST",
      "apiPath": "/candidate.update",
      "headers": {},
      "authTypes": [
        "BASIC"
      ],
      "contentType": "APPLICATION_JSON",
      "queryParams": {},
      "failSilently": false,
      "integrationId": "ashby-update-candidate",
      "dataModelRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$exists(inputData.candidate.email) and inputData.candidate.email != null and $exists(inputData.application.atsJobId) and inputData.application.atsJobId != null and $exists(inputData.candidate.fullName) and inputData.candidate.fullName != null"
        }
      ],
      "requestPayload": {
        "requestBody": "$merge([{\"candidateId\" : \"${candidateId}\",\n  \"name\": \"${name}\",\n  \"email\": \"${email}\",\n  \"phoneNumber\": \"${phoneNumber}\",  \n   \"sourceId\": \"${sourceId}\",\n   \"location\": {\n    \"city\": \"${city}\",\n    \"region\":\"${state}\",\n    \"country\": \"${country}\"\n  }\n},\n(\n       $exists(inputData.application.customFields.questionAnswers.linkedInUrl) and inputData.application.customFields.questionAnswers.linkedInUrl !=null\n       ? {\"linkedInUrl\" : inputData.application.customFields.questionAnswers.linkedInUrl} : {}\n),\n(\n       $exists(inputData.application.customFields.questionAnswers.githubUrl) and inputData.application.customFields.questionAnswers.githubUrl !=null\n       ? {\"githubUrl\" : inputData.application.customFields.questionAnswers.githubUrl} : {}\n),\n(\n       $exists(inputData.application.customFields.questionAnswers.website) and inputData.application.customFields.questionAnswers.website !=null\n       ? {\"website\" : inputData.application.customFields.questionAnswers.website} : {}\n)\n\n])",
        "requestBodyConverter": []
      },
      "responseConfig": {
        "responseType": "SINGLE_ENTITY",
        "jsonataExpression": "$",
        "resPassingJsonataExpression": null
      },
      "dataModelTarget": null,
      "responseHandlers": [
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$exists($.success) and $.success=true"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"candidateId\":\"${candidateId}\", \"integrationId\":\"ashby-update-candidate\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$exists($.success) and $.success=false"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"errorMessage\": $.errors}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 400,
          "jsonataConvertorExpression": "{\"errorMessage\": \"getting 400 error\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 401,
          "jsonataConvertorExpression": "{\"errorMessage\": errorMessage,  \"integrationId\": \"ashby-update-candidate\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 0,
          "jsonataConvertorExpression": "{\"errorMessage\": \"Integration not executed because data might be missing-ashby-update-candidate.\"}"
        }
      ],
      "headersInResponse": false,
      "integrationDependency": {
        "queryType": "SINGLE_ENTITY",
        "jsonDataType": "TEXT_PRIMITIVE",
        "dependencyFields": [
          {
            "type": "RestApiIntegrationField",
            "targetField": "candidateId",
            "jsonataExpression": "response.candidateId",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "candidateId",
            "jsonataExpression": "response.candidateId",
            "restApiIntegrationContext": "API_RESPONSE_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "name",
            "jsonataExpression": "inputData.candidate.fullName",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "email",
            "jsonataExpression": "inputData.candidate.email",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "phoneNumber",
            "jsonataExpression": "inputData.candidate.phoneNumbers.phoneNumber",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "city",
            "jsonataExpression": "inputData.candidate.address.city",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "state",
            "jsonataExpression": "$exists(inputData.candidate.customFields.questionAnswers.province) and inputData.candidate.customFields.questionAnswers.province !=null ?\n    inputData.candidate.customFields.questionAnswers.province : inputData.candidate.address.state",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "country",
            "jsonataExpression": "inputData.candidate.address.country",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          }
        ],
        "dependentIntegrationId": "ashby-check-candidate-already-exists"
      },
      "executionEligibilityRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$exists(inputData.candidate.email) and inputData.candidate.email != null and $exists(inputData.application.atsJobId) and inputData.application.atsJobId != null and $exists(inputData.candidate.fullName) and inputData.candidate.fullName != null"
        },
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$exists(response.candidateId) and response.candidateId != null"
        }
      ]
    },
    {
      "type": "WriteApiIntegration",
      "method": "POST",
      "apiPath": "/candidate.uploadResume",
      "headers": {},
      "authTypes": [
        "BASIC"
      ],
      "contentType": "MULTIPART_FORM_DATA",
      "queryParams": {},
      "failSilently": false,
      "integrationId": "ashby-upload-resume-two",
      "dataModelRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "true"
        }
      ],
      "requestPayload": {
        "requestBody": "{\n    \"candidateId\" : \"${candidateId}\" ,\n    \"resume\": \"${attachmentContent}\"\n}",
        "requestBodyConverter": [
          {
            "field": "resume",
            "fileConvertType": "Base64ToFile"
          }
        ]
      },
      "responseConfig": {
        "responseType": "SINGLE_ENTITY",
        "jsonataExpression": "$",
        "resPassingJsonataExpression": null
      },
      "dataModelTarget": null,
      "responseHandlers": [
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$exists(results.id) and results.id != null and  $exists($.success) and $.success=true"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"candidateId\": results.id, \"integrationId\": \"ashby-upload-resume-two\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$exists($.success) and $.success=false"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"errorMessage\": $.errors}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 404,
          "jsonataConvertorExpression": "{\"errorMessage\": \"Resume upload failed: Candidate or endpoint not found.\", \"integrationId\":\"ashby-upload-resume-two\",\"response\": $}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 500,
          "jsonataConvertorExpression": "{\"errorMessage\": \"ashby server error: \" & (error_message ? error_message : $string($)), \"integrationId\":\"ashby-upload-resume-two\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 400,
          "jsonataConvertorExpression": "{\"errorMessage\": \"getting 400 error\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 0,
          "jsonataConvertorExpression": "{\"errorMessage\": \"Integration not executed because data might be missing-ashby-upload-resume-two.\"}"
        }
      ],
      "headersInResponse": false,
      "integrationDependency": {
        "queryType": "SINGLE_ENTITY",
        "jsonDataType": "TEXT_PRIMITIVE",
        "dependencyFields": [
          {
            "type": "RestApiIntegrationField",
            "targetField": "candidateId",
            "jsonataExpression": "response.candidateId",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "attachmentContent",
            "jsonataExpression": "inputData.application.attachment.attachmentContent",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          }
        ],
        "dependentIntegrationId": "ashby-update-candidate"
      },
      "executionEligibilityRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$exists(inputData.application.attachment) and inputData.application.attachment != null and $exists(inputData.application.attachment.attachmentContent) and inputData.application.attachment.attachmentContent != null"
        },
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$exists(response.candidateId)"
        }
      ]
    },
    {
      "type": "WriteApiIntegration",
      "method": "POST",
      "apiPath": "/application.create",
      "headers": {},
      "authTypes": [
        "BASIC"
      ],
      "contentType": "APPLICATION_JSON",
      "queryParams": {},
      "failSilently": false,
      "integrationId": "ashby-create-application-two",
      "dataModelRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "true"
        }
      ],
      "requestPayload": {
        "requestBody": "{\n  \"candidateId\": \"${candidateId}\",\n  \"jobId\": \"${jobId}\",\n  \"sourceId\": \"${sourceId}\"\n}",
        "requestBodyConverter": []
      },
      "responseConfig": {
        "responseType": "SINGLE_ENTITY",
        "jsonataExpression": "$",
        "resPassingJsonataExpression": null
      },
      "dataModelTarget": null,
      "responseHandlers": [
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$exists(results.id) and results.id != null and  $exists($.success) and $.success=true"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"applicationId\": results.id, \"candidateId\": \"${candidateId}\", \"jobId\": \"${jobId}\"}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "$exists($.success) and $.success=false"
            }
          ],
          "statusCode": 200,
          "jsonataConvertorExpression": "{\"errorMessage\": $.errors}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 400,
          "jsonataConvertorExpression": "{\"errorMessage\":errorMessage}"
        },
        {
          "bodyRules": [
            {
              "type": "BooleanExpressionRule",
              "jsonataExpression": "true"
            }
          ],
          "statusCode": 0,
          "jsonataConvertorExpression": "{\"errorMessage\": \"Integration not executed because data might be missing-ashby-create-application-two.\"}"
        }
      ],
      "headersInResponse": false,
      "integrationDependency": {
        "queryType": "SINGLE_ENTITY",
        "jsonDataType": "TEXT_PRIMITIVE",
        "dependencyFields": [
          {
            "type": "RestApiIntegrationField",
            "targetField": "candidateId",
            "jsonataExpression": "response.candidateId",
            "restApiIntegrationContext": "API_RESPONSE_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "jobId",
            "jsonataExpression": "inputData.application.atsJobId",
            "restApiIntegrationContext": "API_RESPONSE_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "jobId",
            "jsonataExpression": "inputData.application.atsJobId",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          },
          {
            "type": "RestApiIntegrationField",
            "targetField": "candidateId",
            "jsonataExpression": "response.candidateId",
            "restApiIntegrationContext": "API_REQUEST_BODY"
          }
        ],
        "dependentIntegrationId": "ashby-upload-resume-two"
      },
      "executionEligibilityRules": [
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$exists(inputData.application.atsJobId) and inputData.application.atsJobId != null"
        },
        {
          "type": "BooleanExpressionRule",
          "jsonataExpression": "$exists(response.candidateId)"
        }
      ]
    }
  ]